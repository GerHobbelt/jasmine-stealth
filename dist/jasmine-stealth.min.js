/* jasmine-stealth - 0.0.13
 * Makes Jasmine spies a bit more robust
 * https://github.com/searls/jasmine-stealth
 */
(function(){var a,b,c,d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=this,g=function(a){return{each:function(b){var c,d,e,f;for(f=[],d=0,e=a.length;e>d;d++)c=a[d],f.push(b(c));return f},isFunction:function(){return"[object Function]"===Object.prototype.toString.call(a)},isString:function(){return"[object String]"===Object.prototype.toString.call(a)}}},c.spyOnConstructor=function(a,c,d){var e,f;return null==d&&(d=[]),g(d).isString()&&(d=[d]),f={constructor:jasmine.createSpy(""+c+"'s constructor")},e=function(){function a(){f.constructor.apply(this,arguments)}return a}(),g(d).each(function(a){return f[a]=jasmine.createSpy(""+c+"#"+a),e.prototype[a]=function(){return f[a].apply(this,arguments)}}),b(a,c,e),f},e=[],afterEach(function(){return g(e).each(function(a){return a()}),e=[]}),b=function(a,b,c){var d;return d=a[b],a[b]=c,e.push(function(){return a[b]=d})},c.stubFor=c.spyOn,jasmine.createStub=jasmine.createSpy,jasmine.createStubObj=function(a,b){var c,d,e;if(b.constructor===Array)return jasmine.createSpyObj(a,b);d={};for(c in b)e=b[c],d[c]=jasmine.createSpy(a+"."+c),g(e).isFunction()?d[c].andCallFake(e):d[c].andReturn(e);return d},f=function(a){var b,c;return b=function(a,b,c){switch(a.type){case"args":return jasmine.getEnv().equals_(a.ifThis,jasmine.util.argsToArray(b));case"context":return jasmine.getEnv().equals_(a.ifThis,c)}},c=a.plan(),a.andCallFake(function(){var d,e;for(d=0;d<a._stealth_stubbings.length;){if(e=a._stealth_stubbings[d],b(e,arguments,this))return"callFake"===e.satisfaction?e.thenThat.apply(e,arguments):e.thenThat;d++}return c})},jasmine.Spy.prototype.whenContext=function(a){var b;return b=this,b._stealth_stubbings||(b._stealth_stubbings=[]),f(b),d(b,"context",a)},jasmine.Spy.prototype.when=function(){var a,b;return b=this,a=jasmine.util.argsToArray(arguments),b._stealth_stubbings||(b._stealth_stubbings=[]),f(b),d(b,"args",a)},d=function(a,b,c){var d;return d=function(d){return function(e){return a._stealth_stubbings.push({type:b,ifThis:c,satisfaction:d,thenThat:e}),a}},{thenReturn:d("return"),thenCallFake:d("callFake")}},jasmine.Spy.prototype.mostRecentCallThat=function(a,b){var c;for(c=this.calls.length-1;c>=0;){if(a.call(b||this,this.calls[c])===!0)return this.calls[c];c--}},jasmine.Matchers.ArgThat=function(a){function b(a){this.matcher=a}return i(b,a),b.prototype.jasmineMatches=function(a){return this.matcher(a)},b}(jasmine.Matchers.Any),jasmine.Matchers.ArgThat.prototype.matches=jasmine.Matchers.ArgThat.prototype.jasmineMatches,jasmine.argThat=function(a){return new jasmine.Matchers.ArgThat(a)},jasmine.Matchers.Capture=function(a){function b(a){this.captor=a}return i(b,a),b.prototype.jasmineMatches=function(a){return this.captor.value=a,!0},b}(jasmine.Matchers.Any),jasmine.Matchers.Capture.prototype.matches=jasmine.Matchers.Capture.prototype.jasmineMatches,a=function(){function a(){}return a.prototype.capture=function(){return new jasmine.Matchers.Capture(this)},a}(),jasmine.captor=function(){return new a}}).call(this);